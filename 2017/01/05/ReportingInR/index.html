<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><meta name="author" content="Breght Van Baelen"><link rel="icon" href="/b-logo-rounded.png"><title>Hub</title><meta name="description"><link rel="alternate" type="application/rss+xml" title="Hub" href="/atom.xml"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/css/highlight.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800">
<!-- hexo-inject:begin --><!-- hexo-inject:end --></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class="container-fluid"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#main-navbar" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Hub</a></div><div id="main-navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/archives">Archive</a></li></ul></div><div class="avatar-container"><div class="avatar-img-border"><a href="/"><img src="/b-logo-rounded.png" class="avatar-img"></a></div></div></div></nav><header class="header-section"><div class="intro-header no-img"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><h1>Reporting in R</h1><h2 class="post-subheading">using R Markdown and knitr</h2><p class="post-meta">Posted on Jan 5 2017 · <a href="/tags/markdown/" class="tag post-meta">markdown</a> · <a href="/tags/R/" class="tag post-meta">R</a> · <a href="/tags/knitr/" class="tag post-meta">knitr</a> · <a href="/tags/reporting/" class="tag post-meta">reporting</a></p></div></div></div></div></div></header><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role="main" class="blog-post"><p>Reporting your R-script can be done <em>in a matter of seconds</em> by using knitr or R Markdown. These libraries were created to quickly show your <strong>R-code</strong> as well as <strong>results</strong> in a <em>wide variety of document types</em>. Knitr can be used to automatically create a report of an existing R-script. R Markdown uses knitr in combination with <strong>markdown</strong> to create more customised reports. </p>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><p><img src="http://rmarkdown.rstudio.com/images/RMarkdownOutputFormats.png" alt="R-Reporting"></p>
<a id="more"></a>
<h2 id="Knitr"><a href="#Knitr" class="headerlink" title="Knitr"></a>Knitr</h2><hr>
<p>Knitr is ideal to create a report for your <strong>colleagues / insiders</strong>. It provides the function <code>stitch()</code>, which creates a $\LaTeX$ ( default ) or HTML report of an <strong>existing</strong> R-script. Apart from the code and results, it also shows the <strong>R session information</strong>. For more details about this package, refer to the <a href="https://yihui.name/knitr/" target="_blank" rel="external">homepage</a> of knitr.</p>
<h3 id="Set-up"><a href="#Set-up" class="headerlink" title="Set-up"></a>Set-up</h3><p>Assume we have an R-script called <em>script.R</em> containing just two lines of code.</p>
<pre><code>library(dplyr)
glimpse(mtcars)
</code></pre><p>The last line will <em>glimpse</em> at dataset <code>mtcars</code> by showing the number of observations, the number of variables and their first values. Further, make sure <em>knitr</em> is installed by running the following command.</p>
<pre><code>install.packages(&apos;knitr&apos;)
</code></pre><h3 id="Execution"><a href="#Execution" class="headerlink" title="Execution"></a>Execution</h3><p>To quickly generate a report of <em>script.R</em>, simply run the following command.</p>
<pre><code>knitr::stitch(&apos;script.R&apos;)
</code></pre><p>The command generated 2 documents in the working directory, namely a $\LaTeX$ file <em>script.tex</em> and a PDF file <em>script.pdf</em>. The <a href="/content/ReportingInR/script.pdf">PDF-file</a> shows the code, results, R session information and time of execution.</p>
<h2 id="R-Markdown"><a href="#R-Markdown" class="headerlink" title="R Markdown"></a>R Markdown</h2><hr>
<p>R Markdown is ideal to create a report for your <strong>clients / outsiders</strong>. It creates a report by writing a <strong>markdown document</strong> embedded with <strong>R code</strong> and its <strong>results</strong>. The document can then be converted to HTML, $\LaTeX$, PDF, Word or even a slideshow. If you are not familiar with markdown, refer to <a href="/">this</a> article. For more information about R Markdown, refer to the <a href="https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf" target="_blank" rel="external">cheat sheet</a>.</p>
<p>In this section, we are going to create an R Markdown document which includes some libraries, glimpses at the dataset <code>mtcars</code> and displays interactive plots. </p>
<div class="video-container"><iframe src="//player.vimeo.com/video/178485416" frameborder="0" allowfullscreen></iframe></div>
<h3 id="Set-up-1"><a href="#Set-up-1" class="headerlink" title="Set-up"></a>Set-up</h3><p>To create R Markdown documents, I highly recommend using <a href="https://www.rstudio.com/" target="_blank" rel="external">RStudio</a>. From RStudio, create a new R Markdown document by clicking <em>File &gt; New File &gt; R Markdown</em>. Specifying the title and author and selecting the desired output format creates an initial YAML-header. The title of this document is set to <em>“Hello world”</em> and the author to <em>“Breght Van Baelen”</em>. Save the document as <em>report.Rmd</em>.</p>
<p><img src="/content/ReportingInR/RStudio_RMarkdown.png" alt="RStudio-RMarkdown"></p>
<p>Markdown can be written below the YALM-header and R code can be embedded inline by <code>`r some r-code ` </code> or by a code chunk starting with <code>```{r}</code> and ending with <code>``` </code>.</p>
<h4 id="Adding-libraries"><a href="#Adding-libraries" class="headerlink" title="Adding libraries"></a>Adding libraries</h4><p>Add the following text below the YAML-header. What each library is used for will be explained later. Make sure the libraries were downloaded first by using <code>install.packages(&#39;the_package&#39;)</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">## Libraries</div><div class="line">The libraries used for the R-script.</div><div class="line">```&#123;r&#125;</div><div class="line">library(knitr)</div><div class="line">library(dplyr)</div><div class="line">library(shiny)</div><div class="line">```</div></pre></td></tr></table></figure>
<h4 id="Glimpse-mtcars"><a href="#Glimpse-mtcars" class="headerlink" title="Glimpse mtcars"></a>Glimpse mtcars</h4><p>Add the following text to include a glimpse of dataset <code>mtcars</code> to the report. The function <code>kable()</code> produces a markdown output of the table which is then converted to the specified output document.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">## Glimpse</div><div class="line">To glimpse at the dataset `mtcars`, execute the following code.</div><div class="line">```&#123;r&#125;</div><div class="line">kable(glimpse(mtcars))</div><div class="line">```</div></pre></td></tr></table></figure>
<h4 id="Plot-datasets"><a href="#Plot-datasets" class="headerlink" title="Plot datasets"></a>Plot datasets</h4><p>Add <code>runtime:  shiny</code> to the YAML-header and the following text to include an interactive plotter to the report. A combobox will be displayed with the option to plot the <code>mtcars</code> or <code>co2</code> dataset. This will only work when converting to  a presentation or a HTML-document, and will thus be left out when rendering the PDF or Word document.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">## Plot</div><div class="line">Plotting the selected dataset gives us the following picture.</div><div class="line">```&#123;r echo=FALSE&#125;</div><div class="line">selectInput(&quot;data&quot;,&quot;&quot;,c(&quot;mtcars&quot;,&quot;co2&quot;))</div><div class="line">renderPlot(&#123;</div><div class="line">  d &lt;- get(input$data)</div><div class="line">  plot(d)</div><div class="line">&#125;)</div><div class="line">```</div></pre></td></tr></table></figure>
<h3 id="Execution-1"><a href="#Execution-1" class="headerlink" title="Execution"></a>Execution</h3><p>The desired output format is specified in the YAML-header. To render <a href="">report.Rmd</a>, simply press <kbd>ctrl</kbd>+<kbd>shift</kbd>+<kbd>k</kbd> or use the command <code>rmarkdown::render(&quot;report.Rmd&quot;)</code>. </p>
<table>
<thead>
<tr>
<th>Output format</th>
<th>Output             </th>
</tr>
</thead>
<tbody>
<tr>
<td>html_document</td>
<td><a href="/content/ReportingInR/R_Report_HTML_Document.html">html file (webpage)</a>    </td>
</tr>
<tr>
<td>pdf_document</td>
<td><a href="/content/ReportingInR/R_Report_PDF_Document.pdf">pdf document</a>            </td>
</tr>
<tr>
<td>word_document</td>
<td><a href="/content/ReportingInR/R_Report_Word_Document.docx">Microsoft Word .docx</a>    </td>
</tr>
<tr>
<td>beamer_presentation</td>
<td><a href="/content/ReportingInR/R_Report_Beamer_Presentation.pdf">beamer slideshow (pdf)</a></td>
</tr>
<tr>
<td>ioslides_presentation</td>
<td><a href="/content/ReportingInR/R_Report_Ioslides_Presentation.html">ioslides slideshow (html)</a></td>
</tr>
</tbody>
</table>
<p>Use the following output format to also keep the $\LaTeX$ document when converting to PDF.</p>
<pre><code>output: 
  pdf_document: 
    keep_tex: true
</code></pre></article><ul class="pager blog-pager"><li class="next"><a href="/2016/12/29/markdown/" data-toggle="tooltip" data-placement="top" title="Markdown">Next Post →</a></li></ul><div class="disqus-comments"><div class="comments"><div id="disqus_thread"></div></div></div><script>var url_parts = window.location.href.split("?");
var disqus_url = url_parts[0];
(function () {
    console.log("enter disqus");
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = "//breght-van-baelen.disqus.com/embed.js";
    (document.head || d.body ).appendChild(dsq);
})();</script></div></div></div><footer><div class="container beautiful-jekyll-footer"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href="https://github.com/breght-van-baelen" title="GitHub"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-github"></i></span></a></li><li><a href="https://linkedin.com/in/breght-van-baelen" title="LinkedIn"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-linkedin"></i></span></a></li><li><a href="mailto:breghtvb@telenet.be" title="Email me"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-envelope"></i></span></a></li></ul><p class="copyright text-muted">© Breght Van Baelen • 2017 • <a href="mailto:undefined"></a>
</p><p class="theme-by text-muted">Theme by
<a href="https://github.com/twoyao/beautiful-hexo">beautiful-hexo</a>
</p><p class="theme-by text-muted">Header images by
<a href="https://dribbble.com/kat_cg">Catalina Cárcamo</a></p></div></div></div></footer><script src="/js/jquery-1.11.2.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/main.js"></script><script src="/js/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end --></body></html>